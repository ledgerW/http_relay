service: http-relay

plugins:
  - serverless-offline
  - serverless-dotenv-plugin

custom:
  # Our stage is based on what is passed in when running serverless
  # commands. Or fallsback to what we have set in the provider section.
  stage: ${opt:stage, self:provider.stage}

provider:
  name: aws
  runtime: python3.7
  stage: dev
  region: ca-central-1

  environment:
    HOST_URL: ${env:HOST_URL}
    USERNAME: ${env:USERNAME}
    PASSWORD: ${env:PASSWORD}


functions:
  relay:
    handler: relay.main
    memorySize: 256
    timeout: 60
    events:
      - http:
          path: relay
          method: post
      - http:
          path: relay
          method: get
